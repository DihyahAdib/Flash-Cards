<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
      rel="stylesheet"
    />
    <link
      rel="icon"
      type="image/png"
      href="/assets/favicon-96x96.png"
      sizes="96x96"
    />
    <link rel="icon" type="image/svg+xml" href="/assets/favicon.svg" />
    <link rel="shortcut icon" href="/assets/favicon.ico" />
    <link
      rel="apple-touch-icon"
      sizes="180x180"
      href="/assets/apple-touch-icon.png"
    />
    <meta name="apple-mobile-web-app-title" content="Vocabulation" />
    <link rel="manifest" href="/assets/site.webmanifest" />
    <link rel="stylesheet" href="/styles/style.css" />
    <link rel="stylesheet" href="/styles/animations.css" />
    <link rel="stylesheet" scree media="screen" href="/styles/mediaQuery.css" />
    <title>Quiz yourself | Flash Cards</title>
  </head>
  <body>
    <overlay>
      <div class="modal">
        <button id="close-modal">&#9747;</button>
        <h3 class="current-mode">
          Current Mode: <span class="mode-name"></span>
        </h3>
        <h2>Pick Mode</h2>
        <p>Hover over buttons for description of the mode.</p>
        <modes>
          <button class="modebtn" id="cover">Cover Mode</button>
          <button class="modebtn" id="casual">Casual Mode</button>
          <button class="modebtn" id="memo-mode">Memorization Mode</button>
        </modes>
        <div class="modal-explanation">
          <button id="close-modal-explanation">&#10094;</button>
          <c>
            <h2 id="current-mode-explain-name"></h2>
            <p id="explaination-area"></p>
          </c>
        </div>
      </div>

      <flash-cards>
        <btn-panel-modal>
          <h2>control panel</h2>

          <btn-c>
            <button id="cntrl-panel">&#10095;</button>
            <button class="shuffle-words-ctr ctr" id="shuffle-words-ctr">
              <i class="fas fa-random" aria-hidden="true"></i>
            </button>
            <button class="ctr sort-words-ctr" id="sort-words-ctr">
              &#8645;
            </button>
          </btn-c>
        </btn-panel-modal>
        <modal-text>
          <h2 class="mode-name"></h2>
        </modal-text>

        <flash-card-container>
          <!-- container -->
        </flash-card-container>

        <arrow-container>
          <a class="prev">&#10094;</a>
          <a class="next">&#10095;</a>
        </arrow-container>
      </flash-cards>
    </overlay>

    <main-panel>
      <btn-panel>
        <content>
          <h2>Control</h2>
          <p>Panel</p>
          <button-container>
            <button class="activator-buttons" id="input-vocab">&#43;</button>
            <button class="activator-buttons" id="remove-one">&#8722;</button>
            <button class="activator-buttons" id="remove-all">&#128465;</button>
            <button class="activator-buttons shuffle-words" id="shuffle-words">
              <i class="fas fa-random" aria-hidden="true"></i>
            </button>
            <button class="activator-buttons sort-words" id="sort-words">
              &#8645;
            </button>
            <button class="activator-buttons" id="pick-mode">
              <i class="fa-solid fa-arrow-up-right-from-square"></i>
            </button>
          </button-container>
        </content>
      </btn-panel>

      <txtarea-panel>
        <input-panel>
          <text-areas>
            <label
              ><span>Foreign Language</span
              ><input
                autocomplete="off"
                id="text-area"
                placeholder="Vocabulary"
            /></label>

            <label
              ><span>Your Language</span
              ><input
                autocomplete="off"
                id="definition-area"
                placeholder="Definition"
            /></label>
          </text-areas>
        </input-panel>

        <word-panel>
          <word-bank>
            <h2>Word Bank</h2>
            <p>Clicking a specific word WILL remove it.</p>
            <words-container></words-container>
          </word-bank>
        </word-panel>
      </txtarea-panel>
    </main-panel>
  </body>
  <div>
    <script type="module" src="./scripts/classes/state.js"></script>
    <script type="module" src="./scripts/classes/AppState.js"></script>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script type="module" src="./scripts/util.js"></script>
    <script type="module" src="./scripts/modes/casual.js"></script>
    <script type="module" src="./scripts/modes/cover.js"></script>
    <script type="module" src="./scripts/modes/memorization.js"></script>
    <script type="module" src="./scripts/functions.js"></script>
    <script type="module" src="./scripts/updateUi.js"></script>
    <script type="module">
      import {
        AppState,
        VIEW,
        startingState,
      } from "./scripts/classes/AppState.js";
      import {
        shouldShowModalPickModeClass,
        shouldShowModalEXPModeClass,
        shouldShowModalCardModeClass,
      } from "./scripts/updateUi.js";

      const state = new AppState();
      state
        .load(startingState)
        .onSet(function ({ wordBank, cardIndex, currentView }) {
          $("words-container").empty();
          wordBank.forEach(({ word, definition }) => {
            $("<button>")
              .addClass(`new-element`)
              .text(`${word} : ${definition}`)
              .on("click", () => {
                state.set(
                  "wordBank",
                  wordBank.filter(function ({
                    word: storedWord,
                    definition: storedDefinition,
                  }) {
                    return !(
                      word === storedWord && definition === storedDefinition
                    );
                  })
                );
              })
              .appendTo("words-container")
              .data({ word, definition });
          });
          $("body")
            .toggleClass(
              "modal-pick-mode",
              shouldShowModalPickModeClass(currentView)
            )
            .toggleClass(
              "modal-pick-mode-explain",
              shouldShowModalEXPModeClass(currentView)
            );
          toggleClass(
            "modal-play-mode",
            shouldShowModalCardModeClass(currentView)
          );
        });
    </script>
  </div>
</html>
